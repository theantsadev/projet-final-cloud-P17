import{d as D,u as E,a as M,o as d,c as V,w as o,b as a,e,I as P,f as z,g as O,h as p,i as F,j as s,k as S,l as H,m as T,n as R,p as U,t as y,q as N,r as j,s as C,v as w,x as b,y as k,z as x,A as $,B as G,C as J,D as K,E as B,F as Q,G as W,H as u,_ as X}from"./index-BXUmX6Np.js";const Y={class:"login-container"},Z={class:"logo-section"},h={class:"error-message"},ee={key:1},le={class:"switch-mode"},ae={key:0},oe=D({__name:"LoginPage",setup(te){const L=E(),n=M(),t=u(!1),m=u(""),v=u(""),I=u(""),_=u(!1),i=u(!1),f=u(""),c=u("success"),q=()=>{t.value=!t.value,n.clearError()},A=async()=>{if(!m.value||!v.value){f.value="Veuillez remplir tous les champs",c.value="warning",i.value=!0;return}if(t.value&&!I.value){f.value="Veuillez entrer votre nom complet",c.value="warning",i.value=!0;return}n.clearError();let g;t.value?g=await n.register({email:m.value,password:v.value,fullName:I.value}):g=await n.login({email:m.value,password:v.value}),g.success?(f.value=t.value?"Inscription rÃ©ussie !":"Connexion rÃ©ussie !",c.value="success",i.value=!0,setTimeout(()=>{L.push("/map")},1e3)):(f.value=g.message,c.value="danger",i.value=!0)};return(g,l)=>(d(),V(e(W),null,{default:o(()=>[a(e(P),null,{default:o(()=>[a(e(z),{color:"primary"},{default:o(()=>[a(e(O),null,{default:o(()=>[...l[5]||(l[5]=[p("Signalement Routier",-1)])]),_:1})]),_:1})]),_:1}),a(e(F),{class:"ion-padding"},{default:o(()=>[s("div",Y,[s("div",Z,[a(e(S),{icon:e(H),class:"logo-icon"},null,8,["icon"]),l[6]||(l[6]=s("h1",null,"Antananarivo",-1)),l[7]||(l[7]=s("p",null,"Application de signalement routier",-1))]),a(e(T),null,{default:o(()=>[a(e(R),null,{default:o(()=>[a(e(U),null,{default:o(()=>[p(y(t.value?"Inscription":"Connexion"),1)]),_:1})]),_:1}),a(e(N),null,{default:o(()=>[s("form",{onSubmit:j(A,["prevent"])},[t.value?(d(),V(e(C),{key:0},{default:o(()=>[a(e(w),{position:"floating"},{default:o(()=>[...l[8]||(l[8]=[p("Nom complet",-1)])]),_:1}),a(e(b),{modelValue:I.value,"onUpdate:modelValue":l[0]||(l[0]=r=>I.value=r),type:"text",placeholder:"Votre nom complet",required:t.value},null,8,["modelValue","required"])]),_:1})):k("",!0),a(e(C),null,{default:o(()=>[a(e(w),{position:"floating"},{default:o(()=>[...l[9]||(l[9]=[p("Email",-1)])]),_:1}),a(e(b),{modelValue:m.value,"onUpdate:modelValue":l[1]||(l[1]=r=>m.value=r),type:"email",placeholder:"votre@email.com",required:""},null,8,["modelValue"])]),_:1}),a(e(C),null,{default:o(()=>[a(e(w),{position:"floating"},{default:o(()=>[...l[10]||(l[10]=[p("Mot de passe",-1)])]),_:1}),a(e(b),{modelValue:v.value,"onUpdate:modelValue":l[2]||(l[2]=r=>v.value=r),type:_.value?"text":"password",placeholder:"Votre mot de passe",required:""},null,8,["modelValue","type"]),a(e(x),{fill:"clear",slot:"end",onClick:l[3]||(l[3]=r=>_.value=!_.value)},{default:o(()=>[a(e(S),{icon:_.value?e($):e(G)},null,8,["icon"])]),_:1})]),_:1}),e(n).error?(d(),V(e(J),{key:1,color:"danger"},{default:o(()=>[s("p",h,y(e(n).error),1)]),_:1})):k("",!0),a(e(x),{expand:"block",type:"submit",disabled:e(n).isLoading,class:"login-button"},{default:o(()=>[e(n).isLoading?(d(),V(e(K),{key:0,name:"crescent"})):(d(),B("span",ee,y(t.value?"S'inscrire":"Se connecter"),1))]),_:1},8,["disabled"])],32),s("div",le,[a(e(x),{fill:"clear",onClick:q},{default:o(()=>[p(y(t.value?"DÃ©jÃ  un compte ? Se connecter":"Pas de compte ? S'inscrire"),1)]),_:1})])]),_:1})]),_:1}),a(e(T),{color:"light"},{default:o(()=>[a(e(N),null,{default:o(()=>[l[11]||(l[11]=s("p",null,[s("strong",null,"ðŸ”¥ Firebase Authentication")],-1)),l[12]||(l[12]=s("p",null,"L'authentification est gÃ©rÃ©e directement par Firebase.",-1)),t.value?k("",!0):(d(),B("p",ae,"CrÃ©ez un compte pour commencer Ã  signaler les problÃ¨mes routiers."))]),_:1})]),_:1})])]),_:1}),a(e(Q),{"is-open":i.value,message:f.value,color:c.value,duration:3e3,onDidDismiss:l[4]||(l[4]=r=>i.value=!1)},null,8,["is-open","message","color"])]),_:1}))}}),ne=X(oe,[["__scopeId","data-v-c760aeba"]]);export{ne as default};
